import{j as e,w as j}from"./chunk-NL6KNZEE-luD2_20O.js";import{u as y,a as N}from"./zod-MM32q9E5.js";import{u as v}from"./use-categories-CfBzUFga.js";import{c as w}from"./services-Cmawh7FO.js";import"./provider-Bc6krIuI.js";function u({type:t,onSubmit:n,defaultValues:o,isSubmitting:c=!1}){const{register:a,handleSubmit:x,formState:{errors:s,isDirty:d,isValid:l},watch:p,setValue:D}=y({resolver:N(w),defaultValues:{type:t,amount:0,categoryId:void 0,description:"",transactionDate:new Date().toISOString().split("T")[0],paymentMethod:"",...o}}),{data:i,isLoading:h}=v(t),m=p("amount"),b=r=>r.toLocaleString("ja-JP"),g=async r=>{try{await n(r)}catch(f){console.error("Form submission error:",f)}};return e.jsxs("form",{onSubmit:x(g),className:"space-y-6 max-w-md mx-auto p-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t==="expense"?"支出を登録":"収入を登録"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700",children:["金額 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...a("amount",{valueAsNumber:!0}),type:"number",id:"amount",placeholder:"0",className:`w-full px-3 py-2 border rounded-md text-right ${s.amount?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} focus:outline-none focus:ring-2 focus:ring-opacity-50`}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 text-sm",children:"¥"})})]}),m>0&&e.jsxs("p",{className:"text-xs text-gray-500 text-right",children:[b(m),"円"]}),s.amount&&e.jsx("p",{className:"text-sm text-red-600",children:s.amount.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"categoryId",className:"block text-sm font-medium text-gray-700",children:["カテゴリ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...a("categoryId",{valueAsNumber:!0,setValueAs:r=>r===""?void 0:r}),id:"categoryId",disabled:h,className:`w-full px-3 py-2 border rounded-md ${s.categoryId?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} focus:outline-none focus:ring-2 focus:ring-opacity-50`,children:[e.jsx("option",{value:"",children:"カテゴリを選択してください"}),i==null?void 0:i.data.map(r=>e.jsxs("option",{value:r.id,children:[r.icon&&`${r.icon} `,r.name]},r.id))]}),s.categoryId&&e.jsx("p",{className:"text-sm text-red-600",children:s.categoryId.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{htmlFor:"transactionDate",className:"block text-sm font-medium text-gray-700",children:["取引日 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{...a("transactionDate"),type:"date",id:"transactionDate",className:`w-full px-3 py-2 border rounded-md ${s.transactionDate?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} focus:outline-none focus:ring-2 focus:ring-opacity-50`}),s.transactionDate&&e.jsx("p",{className:"text-sm text-red-600",children:s.transactionDate.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"説明・メモ"}),e.jsx("textarea",{...a("description"),id:"description",rows:3,placeholder:"取引の詳細を入力してください（任意）",className:`w-full px-3 py-2 border rounded-md resize-none ${s.description?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} focus:outline-none focus:ring-2 focus:ring-opacity-50`}),s.description&&e.jsx("p",{className:"text-sm text-red-600",children:s.description.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"paymentMethod",className:"block text-sm font-medium text-gray-700",children:"支払い方法"}),e.jsxs("select",{...a("paymentMethod"),id:"paymentMethod",className:`w-full px-3 py-2 border rounded-md ${s.paymentMethod?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} focus:outline-none focus:ring-2 focus:ring-opacity-50`,children:[e.jsx("option",{value:"",children:"選択してください"}),e.jsx("option",{value:"cash",children:"現金"}),e.jsx("option",{value:"credit_card",children:"クレジットカード"}),e.jsx("option",{value:"debit_card",children:"デビットカード"}),e.jsx("option",{value:"bank_transfer",children:"銀行振込"}),e.jsx("option",{value:"electronic_money",children:"電子マネー"}),e.jsx("option",{value:"other",children:"その他"})]}),s.paymentMethod&&e.jsx("p",{className:"text-sm text-red-600",children:s.paymentMethod.message})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:c||!d&&!l,className:`w-full py-3 px-4 rounded-md font-medium transition-colors ${c||!d&&!l?"bg-gray-300 text-gray-500 cursor-not-allowed":t==="expense"?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"} focus:outline-none focus:ring-2 focus:ring-opacity-50 ${t==="expense"?"focus:ring-red-500":"focus:ring-green-500"}`,children:c?"登録中...":t==="expense"?"支出を登録":"収入を登録"})}),e.jsxs("div",{className:"text-xs text-gray-500 text-center space-y-1",children:[e.jsx("p",{children:"💡 ショートカット"}),e.jsx("p",{children:"Tab: 次の項目へ移動 | Enter: フォーム送信"})]})]})}const T=j(function(){const n=async o=>{console.log("Form submitted:",o),alert(`${o.type==="expense"?"支出":"収入"}を登録しました:
金額: ¥${o.amount.toLocaleString()}
カテゴリID: ${o.categoryId}
取引日: ${o.transactionDate}`)};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Transaction Form Demo"}),e.jsx("p",{className:"text-gray-600",children:"支出/収入登録フォームの動作確認"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:e.jsx("div",{className:"p-6",children:e.jsx(u,{type:"expense",onSubmit:n,defaultValues:{amount:1e3,description:"ランチ代"}})})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:e.jsx("div",{className:"p-6",children:e.jsx(u,{type:"income",onSubmit:n,defaultValues:{amount:5e4,description:"給与"}})})})]}),e.jsxs("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-3",children:"使用方法"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-2",children:[e.jsx("li",{children:"• 左側は支出フォーム、右側は収入フォーム"}),e.jsx("li",{children:"• 金額は3桁カンマで表示されます"}),e.jsx("li",{children:"• カテゴリはタイプに応じて絞り込まれます"}),e.jsx("li",{children:"• リアルタイムバリデーションが動作します"}),e.jsx("li",{children:"• フォーム送信時はアラートで内容を確認できます"})]})]})]})})});export{T as default};
