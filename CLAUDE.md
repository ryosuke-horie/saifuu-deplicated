# Saifuu - 家計管理アプリケーション

## プロジェクト概要

完全個人用の家計管理アプリケーション。支出・収入の記録と分析、サブスクリプション管理を行うためのWebアプリケーション。

## 機能

- 支出/収入を登録/編集/一覧するインターフェース
- 支出/収入を中心にデータベースに保存
- サブスクの管理

## 技術スタック

### フレームワーク・ランタイム
- **React Router v7** - フルスタックWebフレームワーク
- **React 19** - UIライブラリ
- **Cloudflare Workers** - エッジランタイム環境
- **TypeScript** - 型安全な開発

### スタイリング・UI
- **Tailwind CSS v4** - ユーティリティファーストCSSフレームワーク

### 開発ツール
- **Vite** - 高速なビルドツール
- **Biome** - コードフォーマッター・リンター
- **pnpm** - パッケージマネージャー

### テスト
- **Playwright** - E2Eテストフレームワーク
- **Vitest** - ユニットテストフレームワーク
- **React Testing Library** - Reactコンポーネントテスト

### データベース・状態管理
- **Cloudflare D1** - SQLiteベースのエッジデータベース（予定）
- **Zod** - スキーマバリデーション

## 開発ルール

### 1. コメント規約
- コメントは必ず日本語で記載する
- 設計意図を明確に記載する
- なぜその実装を選択したのか、代替案は何かを記載する

```typescript
// 例: 
// この関数は支出データを集計するために使用される
// 月単位での集計を行い、カテゴリ別の内訳を返す
// 代替案: 日次集計も検討したが、UIの要件から月次で十分と判断
```

### 2. 型チェック・リント
- 必ず `pnpm check:fix` を実行してから作業を終える
- 型エラーとリントエラーを放置しない
- Biomeの設定に従う

### 3. コミット規約
- 頻繁にコミットする（機能の小さな単位で）
- コミットメッセージは以下のプレフィックスを使用し、日本語で記載する：
  - `feat:` 新機能
  - `fix:` バグ修正
  - `chore:` ビルドプロセスや補助ツールの変更
  - `docs:` ドキュメントの変更
  - `style:` コードの意味に影響しない変更（空白、フォーマット等）
  - `refactor:` バグ修正や機能追加を伴わないコードの変更
  - `test:` テストの追加や既存テストの修正

```bash
# 例:
git commit -m "feat: 支出登録フォームを追加"
git commit -m "fix: 収入一覧の表示バグを修正"
git commit -m "chore: ESLintからBiomeに移行"
```

### 4. 署名設定
- コミット時の署名は必ず `ryosuke-horie` のみとする
- Co-Authoredは設定しない
- 以下のGit設定を使用する：

```bash
git config user.name "ryosuke-horie"
git config user.email "あなたのメールアドレス"
```

## スクリプト

```bash
# 開発サーバー起動
pnpm dev

# 型チェックとリント修正
pnpm check:fix

# ビルド
pnpm build

# E2Eテスト
pnpm test:e2e

# ユニットテスト
pnpm test:unit

# デプロイ（Cloudflare Workers）
pnpm deploy
```

## プロジェクト構造

```
saifuu/
├── app/               # アプリケーションコード
│   ├── routes/        # ページコンポーネント
│   ├── components/    # 共通コンポーネント
│   ├── utils/         # ユーティリティ関数
│   ├── types/         # 型定義
│   └── root.tsx      # ルートコンポーネント
├── tests/            # テストコード
│   └── e2e/         # E2Eテスト
├── public/           # 静的ファイル
├── workers/          # Cloudflare Workers設定
└── CLAUDE.md        # このファイル
```

## 開発の進め方

1. 新機能開発時は、まず設計意図をコメントで記載
2. 小さな単位で実装し、都度 `pnpm check:fix` を実行
3. テストを書く（E2E または ユニットテスト）
4. 機能の完成度に応じて頻繁にコミット
5. プルリクエストを作成してレビュー

## 注意事項

- 個人情報や機密情報をコミットしない
- 環境変数は `.env` ファイルで管理し、サンプルは `.env.example` に記載
- Cloudflare Workersのシークレットは `wrangler secret` で管理