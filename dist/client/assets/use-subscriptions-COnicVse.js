var w=n=>{throw TypeError(n)};var E=(n,t,s)=>t.has(n)||w("Cannot "+s);var l=(n,t,s)=>(E(n,t,"read from private field"),s?s.call(n):t.get(n)),S=(n,t,s)=>t.has(n)?w("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,s),m=(n,t,s,a)=>(E(n,t,"write to private field"),a?a.call(n,s):t.set(n,s),s),Q=(n,t,s)=>(E(n,t,"access private method"),s);import{u as L,a as q}from"./services-Cmawh7FO.js";import{S as R,s as U,h as A,g as I,n as k,u as K,a as j,b as N,q as c}from"./provider-Bc6krIuI.js";import{r as g}from"./chunk-NL6KNZEE-luD2_20O.js";var h,d,p,y,b,M,T,O,P=(O=class extends R{constructor(t,s){super();S(this,b);S(this,h);S(this,d);S(this,p);S(this,y);m(this,h,t),this.setOptions(s),this.bindMethods(),Q(this,b,M).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var a;const s=this.options;this.options=l(this,h).defaultMutationOptions(t),U(this.options,s)||l(this,h).getMutationCache().notify({type:"observerOptionsUpdated",mutation:l(this,p),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&A(s.mutationKey)!==A(this.options.mutationKey)?this.reset():((a=l(this,p))==null?void 0:a.state.status)==="pending"&&l(this,p).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=l(this,p))==null||t.removeObserver(this)}onMutationUpdate(t){Q(this,b,M).call(this),Q(this,b,T).call(this,t)}getCurrentResult(){return l(this,d)}reset(){var t;(t=l(this,p))==null||t.removeObserver(this),m(this,p,void 0),Q(this,b,M).call(this),Q(this,b,T).call(this)}mutate(t,s){var a;return m(this,y,s),(a=l(this,p))==null||a.removeObserver(this),m(this,p,l(this,h).getMutationCache().build(l(this,h),this.options)),l(this,p).addObserver(this),l(this,p).execute(t)}},h=new WeakMap,d=new WeakMap,p=new WeakMap,y=new WeakMap,b=new WeakSet,M=function(){var s;const t=((s=l(this,p))==null?void 0:s.state)??I();m(this,d,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},T=function(t){k.batch(()=>{var s,a,u,i,r,e,o,v;if(l(this,y)&&this.hasListeners()){const f=l(this,d).variables,D=l(this,d).context;(t==null?void 0:t.type)==="success"?((a=(s=l(this,y)).onSuccess)==null||a.call(s,t.data,f,D),(i=(u=l(this,y)).onSettled)==null||i.call(u,t.data,null,f,D)):(t==null?void 0:t.type)==="error"&&((e=(r=l(this,y)).onError)==null||e.call(r,t.error,f,D),(v=(o=l(this,y)).onSettled)==null||v.call(o,void 0,t.error,f,D))}this.listeners.forEach(f=>{f(l(this,d))})})},O);function C(n,t){const s=K(),[a]=g.useState(()=>new P(s,n));g.useEffect(()=>{a.setOptions(n)},[a,n]);const u=g.useSyncExternalStore(g.useCallback(r=>a.subscribe(k.batchCalls(r)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=g.useCallback((r,e)=>{a.mutate(r,e).catch(j)},[a]);if(u.error&&N(a.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:i,mutateAsync:u.mutate}}function F(n){return L({queryKey:c.subscriptions.lists(),queryFn:()=>q.subscriptions.getSubscriptions(),...n})}function V(n){const t=K(),{onSuccess:s,...a}={};return C({mutationFn:u=>q.subscriptions.createSubscription(u),onSuccess:(u,i,r)=>{t.invalidateQueries({queryKey:c.subscriptions.lists()}),t.setQueryData(c.subscriptions.detail(u.data.id),u),t.invalidateQueries({queryKey:c.transactions.all}),s==null||s(u,i,r)},...a})}function W(n){const t=K(),{onError:s,onSettled:a,...u}={};return C({mutationFn:({id:i,data:r})=>q.subscriptions.updateSubscription(i,r),onMutate:async({id:i,data:r})=>{await t.cancelQueries({queryKey:c.subscriptions.detail(i)});const e=t.getQueryData(c.subscriptions.detail(i));return e&&t.setQueryData(c.subscriptions.detail(i),o=>o&&{...o,data:{...o.data,...r}}),{previousSubscription:e}},onError:(i,r,e)=>{e!=null&&e.previousSubscription&&t.setQueryData(c.subscriptions.detail(r.id),e.previousSubscription),s==null||s(i,r,e)},onSettled:(i,r,e,o)=>{t.invalidateQueries({queryKey:c.subscriptions.detail(e.id)}),t.invalidateQueries({queryKey:c.subscriptions.lists()}),t.invalidateQueries({queryKey:c.transactions.all}),a==null||a(i,r,e,o)},...u})}function X(n){const t=K(),{onSuccess:s,onError:a,onSettled:u,...i}={};return C({mutationFn:r=>q.subscriptions.deleteSubscription(r),onMutate:async r=>{await t.cancelQueries({queryKey:c.subscriptions.lists()});const e=t.getQueryData(c.subscriptions.lists());return e&&t.setQueryData(c.subscriptions.lists(),o=>o&&{...o,data:o.data.filter(v=>v.id!==r),count:o.count?o.count-1:void 0}),{previousSubscriptions:e}},onError:(r,e,o)=>{o!=null&&o.previousSubscriptions&&t.setQueryData(c.subscriptions.lists(),o.previousSubscriptions),a==null||a(r,e,o)},onSuccess:(r,e,o)=>{t.removeQueries({queryKey:c.subscriptions.detail(e)}),s==null||s(r,e,o)},onSettled:(r,e,o,v)=>{t.invalidateQueries({queryKey:c.subscriptions.lists()}),t.invalidateQueries({queryKey:c.transactions.all}),u==null||u(r,e,o,v)},...i})}function Y(n){const t=K(),{onError:s,onSettled:a,...u}={};return C({mutationFn:i=>q.subscriptions.deactivateSubscription(i),onMutate:async i=>{await t.cancelQueries({queryKey:c.subscriptions.detail(i)});const r=t.getQueryData(c.subscriptions.detail(i));return r&&t.setQueryData(c.subscriptions.detail(i),e=>e&&{...e,data:{...e.data,isActive:!1}}),{previousSubscription:r}},onError:(i,r,e)=>{e!=null&&e.previousSubscription&&t.setQueryData(c.subscriptions.detail(r),e.previousSubscription),s==null||s(i,r,e)},onSettled:(i,r,e,o)=>{t.invalidateQueries({queryKey:c.subscriptions.detail(e)}),t.invalidateQueries({queryKey:c.subscriptions.lists()}),a==null||a(i,r,e,o)},...u})}function Z(n){const t=K(),{onError:s,onSettled:a,...u}={};return C({mutationFn:i=>q.subscriptions.activateSubscription(i),onMutate:async i=>{await t.cancelQueries({queryKey:c.subscriptions.detail(i)});const r=t.getQueryData(c.subscriptions.detail(i));return r&&t.setQueryData(c.subscriptions.detail(i),e=>e&&{...e,data:{...e.data,isActive:!0}}),{previousSubscription:r}},onError:(i,r,e)=>{e!=null&&e.previousSubscription&&t.setQueryData(c.subscriptions.detail(r),e.previousSubscription),s==null||s(i,r,e)},onSettled:(i,r,e,o)=>{t.invalidateQueries({queryKey:c.subscriptions.detail(e)}),t.invalidateQueries({queryKey:c.subscriptions.lists()}),a==null||a(i,r,e,o)},...u})}function z(n){const{data:t,isLoading:s,error:a,...u}=F(n),i=t==null?void 0:t.data.filter(r=>r.isActive);return{data:i?{...t,data:i,count:i.length}:void 0,isLoading:s,error:a,...u}}function _(n){const{data:t,isLoading:s,error:a,...u}=F(n),i=t==null?void 0:t.data.filter(r=>!r.isActive);return{data:i?{...t,data:i,count:i.length}:void 0,isLoading:s,error:a,...u}}function $(){const{data:n}=z();if(!n)return{monthlyTotal:0,yearlyTotal:0};const t=n.data.reduce((s,a)=>{let u=0;const i=Number(a.amount);switch(a.frequency){case"monthly":u=i;break;case"yearly":u=i/12;break;case"weekly":u=i*52/12;break;case"daily":u=i*30;break}return s.monthlyTotal+=u,s.yearlyTotal+=u*12,s},{monthlyTotal:0,yearlyTotal:0});return{monthlyTotal:Math.round(t.monthlyTotal),yearlyTotal:Math.round(t.yearlyTotal)}}export{Y as a,X as b,F as c,V as d,W as e,z as f,_ as g,$ as h,Z as u};
